<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Resources · DiscreteEvents.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>DiscreteEvents.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../news/">News</a></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="../intro/">Introduction</a></li><li><a class="toctext" href="../setup/">Installation</a></li><li><a class="toctext" href="../clocks/">Clocks</a></li><li><a class="toctext" href="../events/">Events</a></li><li><a class="toctext" href="../processes/">Processes</a></li><li><a class="toctext" href="../actors/">Actors</a></li><li class="current"><a class="toctext" href>Resources</a><ul class="internal"></ul></li><li><a class="toctext" href="../usage/">Utilities</a></li></ul></li><li><span class="toctext">Internals</span><ul><li><a class="toctext" href="../internals/">Internals</a></li><li><a class="toctext" href="../troubleshooting/">Troubleshooting</a></li><li><a class="toctext" href="../history/">Version history</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Manual</li><li><a href>Resources</a></li></ul><a class="edit-page" href="https://github.com/pbayer/DiscreteEvents.jl/blob/master/docs/src/resources.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Resources</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Resources-1" href="#Resources-1">Resources</a></h1><p>Shared resources with limited capacity are often needed in simulations.</p><ol><li>One approach to model them, is to use Julia <a href="https://docs.julialang.org/en/v1/base/parallel/#Base.Channel"><code>Channel</code></a>s with their API. This is thread-safe and thus should be preferred for multithreading applications.</li><li>Using <code>Resource</code> is a second possibility to model shared resources. Its interface gives more flexibility and is faster in single threaded applications, but in multithreading the user must avoid race conditions by explicitly wrapping access with <code>lock -… access …- unlock</code> – if the resources are shared by multiple tasks.</li></ol><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DiscreteEvents.Resource" href="#DiscreteEvents.Resource"><code>DiscreteEvents.Resource</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">Resource{T}(capacity)</code></pre><p>A Resource implements a <a href="https://juliacollections.github.io/DataStructures.jl/latest/deque/"><code>Deque</code></a> with a limited capacity. If used in multithreading applications, the user must avoid race conditions by explicitly wrapping modifying calls with <code>lock-unlock</code>.</p><p><strong>Fields</strong></p><ul><li><code>items::Deque{T}</code>: resource buffer</li><li><code>capacity::Number=Inf</code>: the capacity is limited to the given integer,</li><li><code>lock::ReentrantLock</code>: a lock for coordinating resource access by tasks.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia-repl">julia&gt; </code></pre><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>In order to use the full interface to <code>Resource</code> you have to load <code>DataStructures</code>.</p></div></div></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/3c4641f9e104417f96b7b41550d8949d4c37af46/src/resources.jl#L11-L29">source</a></section><div class="admonition warning"><div class="admonition-title">Missing docstring.</div><div class="admonition-text"><p>Missing docstring for <code>capacity</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition warning"><div class="admonition-title">Missing docstring.</div><div class="admonition-text"><p>Missing docstring for <code>isfull</code>. Check Documenter&#39;s build log for details.</p></div></div><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.isready" href="#Base.isready"><code>Base.isready</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">isready(r::Resource)</code></pre><p>Test whether an item is available.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/3c4641f9e104417f96b7b41550d8949d4c37af46/src/resources.jl#L58-L62">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.isempty" href="#Base.isempty"><code>Base.isempty</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">isempty(r::Resource)</code></pre><p>Test whether the resource is empty.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/3c4641f9e104417f96b7b41550d8949d4c37af46/src/resources.jl#L65-L69">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.empty!" href="#Base.empty!"><code>Base.empty!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">empty!(r::Resource)</code></pre><p>Reset the resource buffer (deque).</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/3c4641f9e104417f96b7b41550d8949d4c37af46/src/resources.jl#L72-L76">source</a><div><div><pre><code class="language-none">empty!(ch::Channel)</code></pre><p>Reset a channel, throw away the elements stored to it.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/3c4641f9e104417f96b7b41550d8949d4c37af46/src/resources.jl#L203-L207">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.length" href="#Base.length"><code>Base.length</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">length(r::Resource)</code></pre><p>Get the number of elements available.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/3c4641f9e104417f96b7b41550d8949d4c37af46/src/resources.jl#L79-L83">source</a><div><div><p>length(ch::Channel)</p><p>Get the number of items in a channel.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/3c4641f9e104417f96b7b41550d8949d4c37af46/src/resources.jl#L186-L190">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.push!" href="#Base.push!"><code>Base.push!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">push!(r::Resource, x)</code></pre><p>Add an element to the back of a resource deque.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/3c4641f9e104417f96b7b41550d8949d4c37af46/src/resources.jl#L86-L90">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.pop!" href="#Base.pop!"><code>Base.pop!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">pop!(r::Resource)</code></pre><p>Remove an element from the back of a resource deque.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/3c4641f9e104417f96b7b41550d8949d4c37af46/src/resources.jl#L94-L98">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.pushfirst!" href="#Base.pushfirst!"><code>Base.pushfirst!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">pushfirst!(r::Resource, x)</code></pre><p>Add an element to the front of a resource deque.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/3c4641f9e104417f96b7b41550d8949d4c37af46/src/resources.jl#L101-L105">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.popfirst!" href="#Base.popfirst!"><code>Base.popfirst!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">popfirst!(r::Resource)</code></pre><p>Remove an element from the front of a resource deque.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/3c4641f9e104417f96b7b41550d8949d4c37af46/src/resources.jl#L109-L113">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.first" href="#Base.first"><code>Base.first</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">first(r::Resource)</code></pre><p>Get the element at the front of a resource deque.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/3c4641f9e104417f96b7b41550d8949d4c37af46/src/resources.jl#L116-L120">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.last" href="#Base.last"><code>Base.last</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">last(r::Resource)</code></pre><p>Get the element at the back of a resource deque.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/3c4641f9e104417f96b7b41550d8949d4c37af46/src/resources.jl#L123-L127">source</a></section><p><code>Resource</code> provides a <code>lock-unlock</code> API for multithreading applications.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.lock" href="#Base.lock"><code>Base.lock</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">lock(r::Resource)</code></pre><p>Acquire the resource lock when it becomes available. If the lock is already locked by a different task/thread, wait for it to become available.</p><p>Each lock must be matched by an unlock.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/3c4641f9e104417f96b7b41550d8949d4c37af46/src/resources.jl#L130-L137">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.unlock" href="#Base.unlock"><code>Base.unlock</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">unlock(r::Resource)</code></pre><p>Releases ownership of the resource lock.</p><p>If this is a recursive lock which has been acquired before, decrement an internal counter and return immediately.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/3c4641f9e104417f96b7b41550d8949d4c37af46/src/resources.jl#L140-L147">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.islocked" href="#Base.islocked"><code>Base.islocked</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">islocked(r::Resource)</code></pre><p>Check whether the lock is held by any task/thread. This should not be used for synchronization (see instead trylock).</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/3c4641f9e104417f96b7b41550d8949d4c37af46/src/resources.jl#L150-L155">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.trylock" href="#Base.trylock"><code>Base.trylock</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">trylock(r::Resource)</code></pre><p>Acquire the resource lock if it is available, and return true if successful. If the lock is already locked by a different task/thread, return false.</p><p>Each successful trylock must be matched by an unlock.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/3c4641f9e104417f96b7b41550d8949d4c37af46/src/resources.jl#L158-L165">source</a></section><footer><hr/><a class="previous" href="../actors/"><span class="direction">Previous</span><span class="title">Actors</span></a><a class="next" href="../usage/"><span class="direction">Next</span><span class="title">Utilities</span></a></footer></article></body></html>
