<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Processes ¬∑ DiscreteEvents.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>DiscreteEvents.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../news/">News</a></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="../intro/">Introduction</a></li><li><a class="toctext" href="../setup/">Installation</a></li><li><a class="toctext" href="../clocks/">Clocks</a></li><li><a class="toctext" href="../events/">Events</a></li><li class="current"><a class="toctext" href>Processes</a><ul class="internal"><li><a class="toctext" href="#Delay-and-wait-‚Ä¶-1">Delay and wait ‚Ä¶</a></li><li><a class="toctext" href="#Now-1">Now</a></li></ul></li><li><a class="toctext" href="../actors/">Actors</a></li><li><a class="toctext" href="../resources/">Resources</a></li><li><a class="toctext" href="../usage/">Utilities</a></li></ul></li><li><span class="toctext">Internals</span><ul><li><a class="toctext" href="../internals/">Internals</a></li><li><a class="toctext" href="../troubleshooting/">Troubleshooting</a></li><li><a class="toctext" href="../history/">Version history</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Manual</li><li><a href>Processes</a></li></ul><a class="edit-page" href="https://github.com/pbayer/DiscreteEvents.jl/blob/master/docs/src/processes.md"><span class="fa">ÔÇõ</span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Processes</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Processes-1" href="#Processes-1">Processes</a></h1><p>Processes are typical event sequences implemented in a function. They are run by asynchronous tasks in a loop and get registered to a clock.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DiscreteEvents.Prc" href="#DiscreteEvents.Prc"><code>DiscreteEvents.Prc</code></a> ‚Äî <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">Prc(id, f, arg...; kw...)</code></pre><p>Prepare a function to run as a process registered to a clock.</p><p><strong>Arguments, fields</strong></p><ul><li><code>id</code>: some unique identification for registration,</li><li><code>f::Function</code>: a function <code>f(clk, arg...; kw...)</code>, must take <code>clk</code>    (a <a href="../clocks/#DiscreteEvents.Clock"><code>Clock</code></a>) as its first argument,</li><li><code>arg...</code>: further arguments to <code>f</code></li><li><code>kw...</code>: keyword arguments to <code>f</code></li></ul><p><strong>Fields</strong></p><ul><li><code>task::Union{Task,Nothing}</code>: a task structure,</li><li><code>clk::Union{AbstractClock,Nothing}</code>: clock where the process is registered,</li><li><code>state::ClockState</code>: process state,</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/b198016c9f2619ef7acc377c3742b071d2c28e64/src/types.jl#L103-L119">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DiscreteEvents.process!" href="#DiscreteEvents.process!"><code>DiscreteEvents.process!</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">process!([clk], prc, cycles; spawn)</code></pre><p>Register a <a href="#DiscreteEvents.Prc"><code>Prc</code></a> to a clock, start an asynchronous task  executing the process function in a loop and return the <code>id</code> it  was registered with. It can then be found under <code>clk.processes[id]</code>.</p><p><strong>Arguments</strong></p><ul><li><code>c&lt;:AbstractClock</code>: if not provided, the process runs under <code>ùê∂</code>,</li><li><code>prc::Prc</code>: it contains a function and its arguments,</li><li><code>cycles&lt;:Number=Inf</code>: number of loop cycles the process should run,</li><li><code>spawn::Bool=false</code>: if true, the process may be scheduled on another thread   in parallel and registered to the thread specific clock.</li></ul><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p><code>spawn</code>ing a process is possible only with parallel clocks setup with <a href="../clocks/#DiscreteEvents.PClock"><code>PClock</code></a> or <a href="../clocks/#DiscreteEvents.fork!"><code>fork!</code></a>.</p></div></div></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/b198016c9f2619ef7acc377c3742b071d2c28e64/src/process.jl#L86-L103">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DiscreteEvents.interrupt!" href="#DiscreteEvents.interrupt!"><code>DiscreteEvents.interrupt!</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">interrupt!(p::Prc, ev::ClockEvent, value=nothing)</code></pre><p>Interrupt a <code>Prc</code> by throwing a <code>ClockException</code> to it.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/b198016c9f2619ef7acc377c3742b071d2c28e64/src/process.jl#L162-L166">source</a></section><div class="admonition warning"><div class="admonition-title">Processes must yield!</div><div class="admonition-text"><p>A process has to <code>yield</code> to Julia by e.g. doing a <code>take!(input)</code> or by calling <a href="#DiscreteEvents.delay!"><code>delay!</code></a> or <a href="#DiscreteEvents.wait!"><code>wait!</code></a>. Otherwise it will starve everything else!</p></div></div><h2><a class="nav-anchor" id="Delay-and-wait-‚Ä¶-1" href="#Delay-and-wait-‚Ä¶-1">Delay and wait ‚Ä¶</a></h2><p>In order to implement a process (an event sequence) functions can call <code>delay!</code> or <code>wait!</code> on the clock or <code>take!</code> and <code>put!</code> on  channels. They are then suspended until a given time or until certain conditions are met or requested resources are available.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DiscreteEvents.delay!" href="#DiscreteEvents.delay!"><code>DiscreteEvents.delay!</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">delay!(clk, Œît)
delay!(clk, T, t)</code></pre><p>Delay (suspend) a process for a time interval <code>Œît</code> on the clock <code>clk</code>.</p><p><strong>Arguments</strong></p><ul><li><code>Œît&lt;:Number</code>: time interval,</li><li><code>T::Timing</code>: only <code>until</code> is accepted,</li><li><code>t&lt;:Number</code>: delay until time t if t &gt; clk.time, else give a warning.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/b198016c9f2619ef7acc377c3742b071d2c28e64/src/process.jl#L116-L127">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DiscreteEvents.wait!" href="#DiscreteEvents.wait!"><code>DiscreteEvents.wait!</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">wait!(clk, cond)</code></pre><p>Delay (suspend) a process on a clock clk until a condition has become true.</p><p><strong>Arguments</strong></p><ul><li><code>cond&lt;:Action</code>: a condition is is true if all expressions or functions therein return true.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/b198016c9f2619ef7acc377c3742b071d2c28e64/src/process.jl#L144-L151">source</a></section><div class="admonition warning"><div class="admonition-title">Processes use blocking calls and are not responsive!</div><div class="admonition-text"><p>If the typical event sequence of a process is interrupted by other events (e.g. a customer reneging, a failure) the process is blocked and has to use exception handling to tackle it.</p></div></div><h2><a class="nav-anchor" id="Now-1" href="#Now-1">Now</a></h2><p>Processes (or asynchronous tasks in general) transfer IO-operations with a <code>now!</code> call to the (master) clock so that they get executed at the current clock time. As a convenience you can print directly to the clock.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DiscreteEvents.now!" href="#DiscreteEvents.now!"><code>DiscreteEvents.now!</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">now!(clk::Clock, ex::A) where {A&lt;:Action}</code></pre><p>Transfer an IO-operation <code>ex</code> to the master clock (on thread 1).  The clock executes it before proceeding to the next time step.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/b198016c9f2619ef7acc377c3742b071d2c28e64/src/process.jl#L175-L180">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.print-Tuple{Clock,Any}" href="#Base.print-Tuple{Clock,Any}"><code>Base.print</code></a> ‚Äî <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">print(clk::Clock, [io::IO], xs...)</code></pre><p>Let the clock <code>clk</code> print out <code>xs</code> to <code>io</code> (or to <code>stdout</code>).</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/b198016c9f2619ef7acc377c3742b071d2c28e64/src/process.jl#L183-L188">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.println-Tuple{Clock,Any}" href="#Base.println-Tuple{Clock,Any}"><code>Base.println</code></a> ‚Äî <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">println(clk::Clock, [io::IO], xs...)</code></pre><p>Let the clock <code>clk</code> print out <code>xs</code> to <code>io</code> (or to <code>stdout</code>) followed by a newline.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/DiscreteEvents.jl/blob/b198016c9f2619ef7acc377c3742b071d2c28e64/src/process.jl#L202-L208">source</a></section><footer><hr/><a class="previous" href="../events/"><span class="direction">Previous</span><span class="title">Events</span></a><a class="next" href="../actors/"><span class="direction">Next</span><span class="title">Actors</span></a></footer></article></body></html>
