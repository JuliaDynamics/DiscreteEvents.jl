<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Usage ¬∑ Simulate.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Simulate.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../overview/">Overview</a></li><li class="current"><a class="toctext" href>Usage</a><ul class="internal"><li><a class="toctext" href="#Modeling-and-simulation-1">Modeling and simulation</a></li><li><a class="toctext" href="#Logging-1">Logging</a></li></ul></li><li><span class="toctext">Examples</span><ul><li><a class="toctext" href="../examples/greeting/">Two guys meet</a></li><li><a class="toctext" href="../examples/tabletennis/">Table tennis</a></li><li><a class="toctext" href="../examples/singleserver/">Single server</a></li><li><a class="toctext" href="../examples/examples/">Further examples</a></li></ul></li><li><a class="toctext" href="../internals/">Internals</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Usage</a></li></ul><a class="edit-page" href="https://github.com/pbayer/Simulate.jl/blob/master/docs/src/usage.md"><span class="fa">ÔÇõ</span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Usage</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="User-guide-1" href="#User-guide-1">User guide</a></h1><p><code>Simulate.jl</code> is not yet an registered package and is installed with</p><pre><code class="language-julia">pkg&gt; add(&quot;https://github.com/pbayer/jl&quot;)</code></pre><p>The package is then loaded with</p><pre><code class="language-julia-repl">julia&gt; using Simulate</code></pre><h2><a class="nav-anchor" id="Modeling-and-simulation-1" href="#Modeling-and-simulation-1">Modeling and simulation</a></h2><p>A virtual <code>Clock</code> allows to schedule Julia functions or expressions as timed events or as sampling actions, which occur at predefined clock ticks. When we <code>run</code> the <code>Clock</code>, it fires the events at their scheduled times and executes the sampling actions at each tick.</p><h3><a class="nav-anchor" id="Silly-example-1" href="#Silly-example-1">Silly example</a></h3><pre><code class="language-julia-repl">julia&gt; m = @__MODULE__ # catching the current module is needed for documentation
Main.ex-usage

julia&gt; using Printf

julia&gt; comm = [&quot;Hi, nice to meet you!&quot;, &quot;How are you?&quot;, &quot;Have a nice day!&quot;];

julia&gt; greet(name, n) =  @printf(&quot;%5.2f s, %s: %s\n&quot;, œÑ(), name, comm[n])
greet (generic function with 1 method)

julia&gt; function foo(n) # 1st passerby
           greet(&quot;Foo&quot;, n)
           event!(ùê∂, :(bar($n)), after, 2*rand(), scope = m)
       end
foo (generic function with 1 method)

julia&gt; function bar(n) # 2nd passerby
           greet(&quot;Bar&quot;, n)
           if n &lt; 3
              event!(ùê∂, :(foo($n+1)), after, 2*rand(), scope = m)
           else
              println(&quot;bye bye&quot;)
           end
       end
bar (generic function with 1 method)

julia&gt; event!(ùê∂, :(foo(1)), at, 10*rand(), scope = m); # create an event for a start

julia&gt; run!(ùê∂, 20) # and run the simulation
 8.50 s, Foo: Hi, nice to meet you!
10.18 s, Bar: Hi, nice to meet you!
10.32 s, Foo: How are you?
10.81 s, Bar: How are you?
11.50 s, Foo: Have a nice day!
12.13 s, Bar: Have a nice day!
bye bye
&quot;run! finished with 6 events, simulation time: 20.0&quot;</code></pre><h3><a class="nav-anchor" id="Types-and-constants-1" href="#Types-and-constants-1">Types and constants</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.Clock" href="#Simulate.Clock"><code>Simulate.Clock</code></a> ‚Äî <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">Clock(Œît::Number=0; t0::Number=0, unit::FreeUnits=NoUnits)</code></pre><p>Create a new simulation clock.</p><p><strong>Arguments</strong></p><ul><li><code>Œît::Number=0</code>: time increment</li><li><code>t0::Number=0</code>: start time for simulation</li><li><code>unit::FreeUnits=NoUnits</code>: clock time unit. Units can be set explicitely by</li></ul><p>setting e.g. <code>unit=minute</code> or implicitly by giving Œît as a time or else setting t0 to a time, e.g. <code>t0=60s</code>.</p><p>If no Œît is given, the simulation doesn&#39;t tick, but jumps from event to event. Œît can be set later with <code>sample_time!</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; using Simulate, Unitful

julia&gt; import Unitful: s, minute, hr

julia&gt; c = Clock()
Clock: state=Simulate.Undefined(), time=0.0, unit=, events: 0, sampling: 0, sample rate Œît=0.0
julia&gt; init!(c)
Simulate.Idle()
julia&gt; c = Clock(1s, unit=minute)
Clock: state=Simulate.Undefined(), time=0.0, unit=minute, events: 0, sampling: 0, sample rate Œît=0.016666666666666666
julia&gt; c = Clock(1s)
Clock: state=Simulate.Undefined(), time=0.0, unit=s, events: 0, sampling: 0, sample rate Œît=1.0
julia&gt; c = Clock(t0=60s)
Clock: state=Simulate.Undefined(), time=60.0, unit=s, events: 0, sampling: 0, sample rate Œît=0.0
julia&gt; c = Clock(1s, t0=1hr)
Clock: state=Simulate.Undefined(), time=3600.0, unit=s, events: 0, sampling: 0, sample rate Œît=1.0</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Clock.jl#L114-L149">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.Timing" href="#Simulate.Timing"><code>Simulate.Timing</code></a> ‚Äî <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">Timing</code></pre><p>Enumeration type for scheduling events and timed conditions:</p><ul><li><code>at</code>: schedule an event at a given time</li><li><code>after</code>: schedule an event a given time after current time</li><li><code>every</code>: schedule an event every given time from now on</li><li><code>before</code>: a timed condition is true before a given time.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaLang/julia/blob/c6da87ff4bc7a855e217856757ad3413cf6d1f79/base/#L0-L9">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.SimFunction" href="#Simulate.SimFunction"><code>Simulate.SimFunction</code></a> ‚Äî <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">SimFunction(func::Function, arg...; kw...)</code></pre><p>Type for preparing a function as an event to a simulation.</p><p><strong>Arguments</strong></p><ul><li><code>func::Function</code>: function to be executed at a later simulation time</li><li><code>arg...</code>: arguments to the function</li><li><code>kw...</code>: keyword arguments</li></ul><p>Be aware that, if the variables stored in a SimFunction are composite types, they can change until they are evaluated later by <code>func</code>. But that&#39;s the nature of simulation.</p><p><strong>Example</strong></p><pre><code class="language-julia-repl">julia&gt; using Simulate

julia&gt; f(a,b,c; d=4, e=5) = a+b+c+d+e  # define a function
f (generic function with 1 method)

julia&gt; sf = SimFunction(f, 10, 20, 30, d=14, e=15)  # store it as SimFunction
SimFunction(f, (10, 20, 30), Base.Iterators.Pairs(:d =&gt; 14,:e =&gt; 15))

julia&gt; sf.func(sf.arg...; sf.kw...)  # and it can be executed later
89

julia&gt; d = Dict(:a =&gt; 1, :b =&gt; 2) # now we set up a dictionary
Dict{Symbol,Int64} with 2 entries:
  :a =&gt; 1
  :b =&gt; 2

julia&gt; f(t) = t[:a] + t[:b] # and a function adding :a and :b
f (generic function with 2 methods)

julia&gt; f(d)  # our add function gives 3
3

julia&gt; ff = SimFunction(f, d)   # we set up a SimFunction
SimFunction(f, (Dict(:a =&gt; 1,:b =&gt; 2),), Base.Iterators.Pairs{Union{},Union{},Tuple{},NamedTuple{(),Tuple{}}}())

julia&gt; d[:a] = 10  # later somehow we need to change d
10

julia&gt; ff  # our SimFunction ff has changed too
SimFunction(f, (Dict(:a =&gt; 10,:b =&gt; 2),), Base.Iterators.Pairs{Union{},Union{},Tuple{},NamedTuple{(),Tuple{}}}())

julia&gt; ff.func(ff.arg...; ff.kw...)  # and calling it gives a different result
12</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Clock.jl#L17-L67">source</a></section><h3><a class="nav-anchor" id="Central-time-1" href="#Central-time-1">Central time</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.ùê∂" href="#Simulate.ùê∂"><code>Simulate.ùê∂</code></a> ‚Äî <span class="docstring-category">Constant</span>.</div><div><div><pre><code class="language-julia">ùê∂
Clk</code></pre><p>italic ùê∂ (<code>\itC</code>+Tab) or <code>Clk</code> is the central <code>Clock()</code>-variable, which normally is sufficient for simulation purposes.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; using Simulate

julia&gt; reset!(ùê∂)
&quot;clock reset to t‚ÇÄ=0.0, sampling rate Œît=0.0.&quot;
julia&gt; ùê∂  # central clock
Clock: state=Simulate.Idle(), time=0.0, unit=, events: 0, sampling: 0, sample rate Œît=0.0
julia&gt; Clk  # alias
Clock: state=Simulate.Idle(), time=0.0, unit=, events: 0, sampling: 0, sample rate Œît=0.0
julia&gt; ùê∂.time
0.0</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Clock.jl#L269-L290">source</a></section><h3><a class="nav-anchor" id="Functions-1" href="#Functions-1">Functions</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.setUnit!" href="#Simulate.setUnit!"><code>Simulate.setUnit!</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">setUnit!(sim::Clock, new::FreeUnits)</code></pre><p>set a clock to a new time unit in <code>Unitful</code>. If necessary convert current clock times to the new unit.</p><p><strong>Arguments</strong></p><ul><li><code>sim::Clock</code></li><li><code>new::FreeUnits</code>: new is one of <code>ms</code>, <code>s</code>, <code>minute</code> or <code>hr</code> or another Unitful</li></ul><p><code>Time</code> unit.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; using Simulate, Unitful

julia&gt; import Unitful: Time, s, minute, hr

julia&gt; c = Clock(t0=60) # setup a new clock with t0=60
Clock: state=Simulate.Undefined(), time=60.0, unit=, events: 0, sampling: 0, sample rate Œît=0.0
julia&gt; œÑ(c) # current time is 60.0 NoUnits
60.0
julia&gt; setUnit!(c, s)  # set clock unit to Unitful.s
60.0 s
julia&gt; œÑ(c) # current time is now 60.0 s
60.0 s
julia&gt; setUnit!(c, minute)  # set clock unit to Unitful.minute
1.0 minute
julia&gt; œÑ(c) # current time is now 1.0 minute
1.0 minute
julia&gt; typeof(œÑ(c))  # œÑ(c) now returns a time Quantity ...
Quantity{Float64,ùêì,Unitful.FreeUnits{(minute,),ùêì,nothing}}
julia&gt; isa(œÑ(c), Time)
true
julia&gt; uconvert(s, œÑ(c)) # ... which can be converted to other time units
60.0 s
julia&gt; œÑ(c).val  # it has a value of 1.0
1.0
julia&gt; c.time  # internal clock time is set to 1.0 (is a Float64)
1.0
julia&gt; c.unit  # internal clock unit is set to Unitful.minute
minute</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Clock.jl#L204-L246">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.œÑ" href="#Simulate.œÑ"><code>Simulate.œÑ</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">œÑ(sim::Clock=ùê∂)
tau(sim::Clock=Tau)</code></pre><p>Return the current simulation time (œÑ=	au+Tab).</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; using Simulate

julia&gt; reset!(ùê∂)
&quot;clock reset to t‚ÇÄ=0.0, sampling rate Œît=0.0.&quot;
julia&gt; œÑ() # gives the central time
0.0
julia&gt; tau() # alias, gives the central time
0.0</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Clock.jl#L293-L311">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.sample_time!" href="#Simulate.sample_time!"><code>Simulate.sample_time!</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">sample_time!(sim::Clock, Œît::Number)</code></pre><p>set the clock&#39;s sampling time starting from now (<code>ùê∂(sim)</code>).</p><p><strong>Arguments</strong></p><ul><li><code>sim::Clock</code></li><li><code>Œît::Number</code>: sample rate, time interval for sampling</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Clock.jl#L519-L527">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.event!" href="#Simulate.event!"><code>Simulate.event!</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">event!(sim::Clock, ex::Union{Expr, SimFunction}, t::Number; scope::Module=Main, cycle::Number=0.0)::Float64
event!(sim::Clock, ex::Union{Expr, SimFunction}, T::Timing, t::Number; scope::Module=Main)::Float64</code></pre><p>Schedule a function or expression for a given simulation time.</p><p><strong>Arguments</strong></p><ul><li><code>sim::Clock</code>: simulation clock</li><li><code>ex::{Expr, SimFunction}</code>: an expression or SimFunction</li><li><code>t::Float64</code> or <code>t::Time</code>: simulation time</li><li><code>T::Timing</code>: a timing, <code>at</code>, <code>after</code> or <code>every</code> (<code>before</code> behaves like <code>at</code>)</li><li><code>scope::Module=Main</code>: scope for the expression to be evaluated</li><li><code>cycle::Float64=0.0</code>: repeat cycle time for the event</li></ul><p><strong>returns</strong></p><p>Scheduled internal simulation time (unitless) for that event.</p><p>May return a time <code>&gt; t</code> from repeated applications of <code>nextfloat(t)</code> if there are events scheduled for <code>t</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; using Simulate, Unitful

julia&gt; import Unitful: s, minute, hr

julia&gt; myfunc(a, b) = a+b
myfunc (generic function with 1 method)
julia&gt; event!(ùê∂, SimFunction(myfunc, 1, 2), 1) # a 1st event
1.0
julia&gt; event!(ùê∂, SimFunction(myfunc, 2, 3), 1) #  a 2nd event to the same time
1.0000000000000002
julia&gt; event!(ùê∂, SimFunction(myfunc, 3, 4), 1s)
Warning: clock has no time unit, ignoring units
1.0000000000000004
julia&gt; setUnit!(ùê∂, s)
0.0 s
julia&gt; event!(ùê∂, SimFunction(myfunc, 4, 5), 1minute)
60.0
julia&gt; event!(ùê∂, SimFunction(myfunc, 5, 6), after, 1hr)
3600.0
julia&gt; ùê∂
Clock: state=Simulate.Idle(), time=0.0, unit=s, events: 5, sampling: 0, sample rate Œît=0.0
julia&gt; run!(ùê∂, 1hr)
&quot;run! finished with 5 events, simulation time: 3600.0&quot;</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Clock.jl#L448-L495">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.sample!" href="#Simulate.sample!"><code>Simulate.sample!</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">sample!(sim::Clock, ex::Union{Expr, SimFunction}; scope::Module=Main)</code></pre><p>enqueue an expression for sampling.</p><p><strong>Arguments</strong></p><ul><li><code>sim::Clock</code></li><li><code>ex::Union{Expr, SimFunction}</code>: an expression or function</li><li><code>scope::Module=Main</code>: optional, a scope for the expression to be evaluated in</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Clock.jl#L533-L542">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.incr!" href="#Simulate.incr!"><code>Simulate.incr!</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">incr!(sim::Clock)</code></pre><p>Take one simulation step, execute the next tick or event.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Clock.jl#L698-L702">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.run!" href="#Simulate.run!"><code>Simulate.run!</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">run!(sim::Clock, duration::Number)</code></pre><p>Run a simulation for a given duration.</p><p>Call scheduled events and evaluate sampling expressions at each tick in that timeframe.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Clock.jl#L686-L693">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.stop!" href="#Simulate.stop!"><code>Simulate.stop!</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">stop!(sim::Clock)</code></pre><p>Stop a running simulation.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Clock.jl#L705-L709">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.resume!" href="#Simulate.resume!"><code>Simulate.resume!</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">resume!(sim::Clock)</code></pre><p>Resume a halted simulation.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Clock.jl#L712-L716">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.sync!" href="#Simulate.sync!"><code>Simulate.sync!</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">sync!(sim::Clock, to::Clock=ùê∂)</code></pre><p>Force a synchronization of two clocks. Change all registered times of <code>sim</code> accordingly. Convert or force sim.unit to to.unit.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Clock.jl#L315-L321">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.reset!" href="#Simulate.reset!"><code>Simulate.reset!</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">reset!(sim::Clock, Œît::Number=0; t0::Number=0, hard::Bool=true, unit=NoUnits)</code></pre><p>reset a clock</p><p><strong>Arguments</strong></p><ul><li><code>sim::Clock</code></li><li><code>Œît::Number=0</code>: time increment</li><li><code>t0::Float64=0</code> or <code>t0::Time</code>: start time</li><li><code>hard::Bool=true</code>: time is reset, all scheduled events and sampling are</li></ul><p>deleted. If hard=false, then only time is reset, event and sampling times are adjusted accordingly.</p><ul><li><code>unit=NoUnits</code>: the Time unit for the clock after reset. If a <code>Œît::Time</code> is</li></ul><p>given, its Time unit goes into the clock Time unit. If only t0::Time is given, its Time unit goes into the clock time unit.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; using Simulate, Unitful

julia&gt; import Unitful: s

julia&gt; c = Clock(1s, t0=60s)
Clock: state=Simulate.Undefined(), time=60.0, unit=s, events: 0, sampling: 0, sample rate Œît=1.0
julia&gt; reset!(c)
&quot;clock reset to t‚ÇÄ=0.0, sampling rate Œît=0.0.&quot;
julia&gt; c
Clock: state=Simulate.Idle(), time=0.0, unit=, events: 0, sampling: 0, sample rate Œît=0.0</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Clock.jl#L346-L376">source</a></section><h2><a class="nav-anchor" id="Logging-1" href="#Logging-1">Logging</a></h2><p>A <code>Logger</code> allows to register variables and to record their states on demand. The last record is stored in the logging variable. According to the Logger&#39;s state it can be printed or stored in a table.</p><h3><a class="nav-anchor" id="Example-1" href="#Example-1">Example</a></h3><pre><code class="language-julia-repl">julia&gt; sim = Clock(); # create a clock

julia&gt; l = Logger(); # create a logging variable

julia&gt; init!(l, sim); # initialize the logger

julia&gt; (a, b, c) = 1, 1, 1 # create some variables
(1, 1, 1)

julia&gt; setup!(l, [:a, :b, :c], scope = m); # register them for logging

julia&gt; record!(l) # record the variables with the current clock time

julia&gt; l.last # show the last record
(time = 0.0, a = 1, b = 1, c = 1)

julia&gt; function f()  # a function for increasing and recording the variables
         global a += 1
         global b = a^2
         global c = a^3
         record!(l)
       end
f (generic function with 1 method)

julia&gt; switch!(l, 1); # switch logger to printing

julia&gt; f() # increase and record the variables
(time = 0.0, a = 2, b = 4, c = 8)

julia&gt; switch!(l, 2); # switch logger to storing in data table

julia&gt; for i in 1:10 # create some events
           event!(sim, :(f()), i, scope = m)
       end

julia&gt; run!(sim, 10) # run a simulation
&quot;run! finished with 10 events, simulation time: 10.0&quot;

julia&gt; l.df # view the recorded values
10√ó4 DataFrames.DataFrame
‚îÇ Row ‚îÇ time    ‚îÇ a     ‚îÇ b     ‚îÇ c     ‚îÇ
‚îÇ     ‚îÇ Float64 ‚îÇ Int64 ‚îÇ Int64 ‚îÇ Int64 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 1   ‚îÇ 1.0     ‚îÇ 3     ‚îÇ 9     ‚îÇ 27    ‚îÇ
‚îÇ 2   ‚îÇ 2.0     ‚îÇ 4     ‚îÇ 16    ‚îÇ 64    ‚îÇ
‚îÇ 3   ‚îÇ 3.0     ‚îÇ 5     ‚îÇ 25    ‚îÇ 125   ‚îÇ
‚îÇ 4   ‚îÇ 4.0     ‚îÇ 6     ‚îÇ 36    ‚îÇ 216   ‚îÇ
‚îÇ 5   ‚îÇ 5.0     ‚îÇ 7     ‚îÇ 49    ‚îÇ 343   ‚îÇ
‚îÇ 6   ‚îÇ 6.0     ‚îÇ 8     ‚îÇ 64    ‚îÇ 512   ‚îÇ
‚îÇ 7   ‚îÇ 7.0     ‚îÇ 9     ‚îÇ 81    ‚îÇ 729   ‚îÇ
‚îÇ 8   ‚îÇ 8.0     ‚îÇ 10    ‚îÇ 100   ‚îÇ 1000  ‚îÇ
‚îÇ 9   ‚îÇ 9.0     ‚îÇ 11    ‚îÇ 121   ‚îÇ 1331  ‚îÇ
‚îÇ 10  ‚îÇ 10.0    ‚îÇ 12    ‚îÇ 144   ‚îÇ 1728  ‚îÇ</code></pre><h3><a class="nav-anchor" id="Types-1" href="#Types-1">Types</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.Logger" href="#Simulate.Logger"><code>Simulate.Logger</code></a> ‚Äî <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">Logger()</code></pre><p>Setup and return a logging variable.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Logger.jl#L5-L9">source</a></section><h3><a class="nav-anchor" id="Functions-2" href="#Functions-2">Functions</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.init!" href="#Simulate.init!"><code>Simulate.init!</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">init!(sim::Clock)</code></pre><p>initialize a clock.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Clock.jl#L719-L723">source</a><div><div><pre><code class="language-none">init!(L::Logger, sim::Clock)</code></pre><p>Initialize a Logger.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Logger.jl#L95-L99">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.setup!" href="#Simulate.setup!"><code>Simulate.setup!</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">setup!(L::Logger, vars::Array{Symbol})</code></pre><p>Setup a logger with logging variables.</p><p><strong>Arguments</strong></p><ul><li><code>L::Logger</code></li><li><code>vars::Array{Symbol}</code>: An array of symbols, e.g. of global variables</li><li><code>scope::Module = Main</code>: Scope in which to evaluate the variables</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Logger.jl#L102-L111">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.switch!" href="#Simulate.switch!"><code>Simulate.switch!</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">switch!(L::Logger, to::Number=0)</code></pre><p>Switch the operating mode of a logger.</p><p><code>to = 0</code>: no output, <code>to = 1</code>: print, `to = 2: store in log table&quot;</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Logger.jl#L86-L92">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.record!" href="#Simulate.record!"><code>Simulate.record!</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">record!(L::Logger)</code></pre><p>record the logging variables with the current operating mode.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Logger.jl#L115-L119">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulate.clear!" href="#Simulate.clear!"><code>Simulate.clear!</code></a> ‚Äî <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">clear!(L::Logger)</code></pre><p>clear the loggers last record and data table.</p></div></div><a class="source-link" target="_blank" href="https://github.com/pbayer/Simulate.jl/blob/52d571712c72b6697c61b8128f9054fbac3e3e20/src/Logger.jl#L122-L126">source</a></section><footer><hr/><a class="previous" href="../overview/"><span class="direction">Previous</span><span class="title">Overview</span></a><a class="next" href="../examples/greeting/"><span class="direction">Next</span><span class="title">Two guys meet</span></a></footer></article></body></html>
